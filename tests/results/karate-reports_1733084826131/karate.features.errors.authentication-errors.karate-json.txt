{"failedCount":3,"prefixedPath":"karate\/features\/errors\/authentication-errors.feature","packageQualifiedName":"karate.features.errors.authentication-errors","loopIndex":-1,"relativePath":"karate\/features\/errors\/authentication-errors.feature","scenarioResults":[{"sectionIndex":0,"stepResults":[{"result":{"nanos":29750,"millis":0.02975,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url baseUrl"}},{"result":{"nanos":23542,"millis":0.023542,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"headers headers"}},{"result":{"nanos":1685375,"millis":1.685375,"status":"passed"},"step":{"line":9,"prefix":"*","index":0,"text":"def query = read('queries\/test-missing-auth.graphql')"}},{"result":{"nanos":409334,"millis":0.409334,"status":"passed"},"step":{"line":10,"prefix":"Given","index":1,"text":"request { query: '#(query)' }"}},{"result":{"nanos":5936042,"millis":5.936042,"status":"passed"},"step":{"line":11,"prefix":"When","index":2,"text":"method POST"},"stepLog":"20:21:05.661 request:\n1 > POST http:\/\/localhost:8080\/v1\/graphql\n1 > Content-Type: application\/json; charset=UTF-8\n1 > X-Hasura-Admin-Secret: \n1 > Content-Length: 92\n1 > Host: localhost:8080\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.14 (Java\/11.0.16)\n1 > Accept-Encoding: gzip,deflate\n{\"query\":\"query testMissingAuth {\\n  currentUser {\\n    id\\n    email\\n    roles\\n  }\\n}\\n\"}\n\n20:21:05.666 response time in milliseconds: 4\n1 < 200\n1 < Date: Sun, 01 Dec 2024 20:21:04 GMT\n1 < Content-Type: application\/json; charset=utf-8\n1 < Content-Length: 133\n{\"errors\":[{\"message\":\"invalid \\\"x-hasura-admin-secret\\\"\/\\\"x-hasura-access-key\\\"\",\"extensions\":{\"path\":\"$\",\"code\":\"access-denied\"}}]}\n\n"},{"result":{"nanos":10875,"millis":0.010875,"status":"passed"},"step":{"line":12,"prefix":"Then","index":3,"text":"status 200"}},{"result":{"nanos":470166,"errorMessage":"match failed: CONTAINS\n  $ | actual does not contain expected (STRING:STRING)\n  'invalid \"x-hasura-admin-secret\"\/\"x-hasura-access-key\"'\n  'authentication required'\n\nkarate\/features\/errors\/authentication-errors.feature:13","millis":0.470166,"status":"failed"},"step":{"line":13,"prefix":"And","index":4,"text":"match response.errors[0].message contains 'authentication required'"},"stepLog":"20:21:05.667 karate\/features\/errors\/authentication-errors.feature:13\nAnd match response.errors[0].message contains 'authentication required'\nmatch failed: CONTAINS\n  $ | actual does not contain expected (STRING:STRING)\n  'invalid \"x-hasura-admin-secret\"\/\"x-hasura-access-key\"'\n  'authentication required'\n\nkarate\/features\/errors\/authentication-errors.feature:13\n"}],"line":8,"description":"","durationMillis":8.565084,"failed":true,"error":"match failed: CONTAINS\n  $ | actual does not contain expected (STRING:STRING)\n  'invalid \"x-hasura-admin-secret\"\/\"x-hasura-access-key\"'\n  'authentication required'\n\nkarate\/features\/errors\/authentication-errors.feature:13","executorName":"main","name":"Missing Authentication Test","startTime":1733084465657,"refId":"[1:8]","endTime":1733084465667,"exampleIndex":-1},{"sectionIndex":1,"stepResults":[{"result":{"nanos":28500,"millis":0.0285,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url baseUrl"}},{"result":{"nanos":21875,"millis":0.021875,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"headers headers"}},{"result":{"nanos":1441084,"millis":1.441084,"status":"passed"},"step":{"line":16,"prefix":"*","index":0,"text":"def query = read('queries\/test-invalid-user.graphql')"}},{"result":{"nanos":155333,"millis":0.155333,"status":"passed"},"step":{"line":17,"prefix":"Given","index":1,"text":"request { query: '#(query)', variables: { userId: 'invalid-id' } }"}},{"result":{"nanos":7689750,"millis":7.68975,"status":"passed"},"step":{"line":18,"prefix":"When","index":2,"text":"method POST"},"stepLog":"20:21:05.675 request:\n1 > POST http:\/\/localhost:8080\/v1\/graphql\n1 > Content-Type: application\/json; charset=UTF-8\n1 > X-Hasura-Admin-Secret: \n1 > Content-Length: 190\n1 > Host: localhost:8080\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.14 (Java\/11.0.16)\n1 > Accept-Encoding: gzip,deflate\n{\"query\":\"query testInvalidUser($userId: ID!) {\\n  user(id: $userId) {\\n    id\\n    email\\n    profile {\\n      firstName\\n      lastName\\n    }\\n  }\\n}\",\"variables\":{\"userId\":\"invalid-id\"}}\n\n20:21:05.678 response time in milliseconds: 2\n1 < 200\n1 < Date: Sun, 01 Dec 2024 20:21:05 GMT\n1 < Content-Type: application\/json; charset=utf-8\n1 < Content-Length: 133\n{\"errors\":[{\"message\":\"invalid \\\"x-hasura-admin-secret\\\"\/\\\"x-hasura-access-key\\\"\",\"extensions\":{\"path\":\"$\",\"code\":\"access-denied\"}}]}\n\n"},{"result":{"nanos":17208,"millis":0.017208,"status":"passed"},"step":{"line":19,"prefix":"Then","index":3,"text":"status 200"}},{"result":{"nanos":1995750,"errorMessage":"match failed: CONTAINS\n  $ | actual does not contain expected (STRING:STRING)\n  'invalid \"x-hasura-admin-secret\"\/\"x-hasura-access-key\"'\n  'user not found'\n\nkarate\/features\/errors\/authentication-errors.feature:20","millis":1.99575,"status":"failed"},"step":{"line":20,"prefix":"And","index":4,"text":"match response.errors[0].message contains 'user not found'"},"stepLog":"20:21:05.684 karate\/features\/errors\/authentication-errors.feature:20\nAnd match response.errors[0].message contains 'user not found'\nmatch failed: CONTAINS\n  $ | actual does not contain expected (STRING:STRING)\n  'invalid \"x-hasura-admin-secret\"\/\"x-hasura-access-key\"'\n  'user not found'\n\nkarate\/features\/errors\/authentication-errors.feature:20\n"}],"line":15,"description":"","durationMillis":11.3495,"failed":true,"error":"match failed: CONTAINS\n  $ | actual does not contain expected (STRING:STRING)\n  'invalid \"x-hasura-admin-secret\"\/\"x-hasura-access-key\"'\n  'user not found'\n\nkarate\/features\/errors\/authentication-errors.feature:20","executorName":"main","name":"Invalid User ID Test","startTime":1733084465669,"refId":"[2:15]","endTime":1733084465684,"exampleIndex":-1},{"sectionIndex":2,"stepResults":[{"result":{"nanos":69209,"millis":0.069209,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url baseUrl"}},{"result":{"nanos":52083,"millis":0.052083,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"headers headers"}},{"result":{"nanos":1103167,"millis":1.103167,"status":"passed"},"step":{"line":23,"prefix":"*","index":0,"text":"def query = read('queries\/test-unauthorized-access.graphql')"}},{"result":{"nanos":108333,"millis":0.108333,"status":"passed"},"step":{"line":24,"prefix":"Given","index":1,"text":"request { query: '#(query)', variables: { resourceId: 'restricted-resource' } }"}},{"result":{"nanos":3470250,"millis":3.47025,"status":"passed"},"step":{"line":25,"prefix":"When","index":2,"text":"method POST"},"stepLog":"20:21:05.690 request:\n1 > POST http:\/\/localhost:8080\/v1\/graphql\n1 > Content-Type: application\/json; charset=UTF-8\n1 > X-Hasura-Admin-Secret: \n1 > Content-Length: 212\n1 > Host: localhost:8080\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.14 (Java\/11.0.16)\n1 > Accept-Encoding: gzip,deflate\n{\"query\":\"query testUnauthorizedAccess($resourceId: ID!) {\\n  restrictedResource(id: $resourceId) {\\n    id\\n    name\\n    sensitiveData\\n    accessLevel\\n  }\\n}\",\"variables\":{\"resourceId\":\"restricted-resource\"}}\n\n20:21:05.692 response time in milliseconds: 1\n1 < 200\n1 < Date: Sun, 01 Dec 2024 20:21:05 GMT\n1 < Content-Type: application\/json; charset=utf-8\n1 < Content-Length: 133\n{\"errors\":[{\"message\":\"invalid \\\"x-hasura-admin-secret\\\"\/\\\"x-hasura-access-key\\\"\",\"extensions\":{\"path\":\"$\",\"code\":\"access-denied\"}}]}\n\n"},{"result":{"nanos":8041,"millis":0.008041,"status":"passed"},"step":{"line":26,"prefix":"Then","index":3,"text":"status 200"}},{"result":{"nanos":462459,"errorMessage":"match failed: CONTAINS\n  $ | actual does not contain expected (STRING:STRING)\n  'invalid \"x-hasura-admin-secret\"\/\"x-hasura-access-key\"'\n  'unauthorized'\n\nkarate\/features\/errors\/authentication-errors.feature:27","millis":0.462459,"status":"failed"},"step":{"line":27,"prefix":"And","index":4,"text":"match response.errors[0].message contains 'unauthorized'"},"stepLog":"20:21:05.702 karate\/features\/errors\/authentication-errors.feature:27\nAnd match response.errors[0].message contains 'unauthorized'\nmatch failed: CONTAINS\n  $ | actual does not contain expected (STRING:STRING)\n  'invalid \"x-hasura-admin-secret\"\/\"x-hasura-access-key\"'\n  'unauthorized'\n\nkarate\/features\/errors\/authentication-errors.feature:27\n"}],"line":22,"description":"","durationMillis":5.273542,"failed":true,"error":"match failed: CONTAINS\n  $ | actual does not contain expected (STRING:STRING)\n  'invalid \"x-hasura-admin-secret\"\/\"x-hasura-access-key\"'\n  'unauthorized'\n\nkarate\/features\/errors\/authentication-errors.feature:27","executorName":"main","name":"Unauthorized Access Test","startTime":1733084465686,"refId":"[3:22]","endTime":1733084465702,"exampleIndex":-1}],"callDepth":0,"name":"Authentication Error Tests","description":"Test authentication error scenarios","resultDate":"2024-12-01 08:21:05 PM","durationMillis":25.188126,"passedCount":0}