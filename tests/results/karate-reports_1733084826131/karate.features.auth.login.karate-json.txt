{"failedCount":2,"prefixedPath":"karate\/features\/auth\/login.feature","packageQualifiedName":"karate.features.auth.login","loopIndex":-1,"relativePath":"karate\/features\/auth\/login.feature","scenarioResults":[{"sectionIndex":0,"stepResults":[{"result":{"nanos":602792,"millis":0.602792,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url baseUrl"}},{"result":{"nanos":560750,"millis":0.56075,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"headers headers"}},{"result":{"nanos":5117125,"millis":5.117125,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def loginQuery = read('queries\/login-with-firebase.graphql')"}},{"result":{"nanos":403792,"millis":0.403792,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def testToken = 'valid-firebase-token'"}},{"result":{"nanos":275583,"millis":0.275583,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def expiredToken = 'expired-firebase-token'"}},{"result":{"nanos":266291,"millis":0.266291,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def invalidToken = 'invalid-token'"}},{"result":{"nanos":12025750,"millis":12.02575,"status":"passed"},"step":{"endLine":22,"line":14,"prefix":"Given","docString":"{\n    query: '#(loginQuery)',\n    variables: {\n        firebaseToken: '#(testToken)'\n    }\n}","index":0,"text":"request"}},{"result":{"nanos":126910584,"millis":126.910584,"status":"passed"},"step":{"line":23,"prefix":"When","index":1,"text":"method POST"},"stepLog":"20:21:04.514 request:\n1 > POST http:\/\/localhost:8080\/v1\/graphql\n1 > Content-Type: application\/json; charset=UTF-8\n1 > X-Hasura-Admin-Secret: \n1 > Content-Length: 491\n1 > Host: localhost:8080\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.14 (Java\/11.0.16)\n1 > Accept-Encoding: gzip,deflate\n{\"query\":\"mutation LoginWithFirebase($token: String!) {\\n  loginWithFirebase(token: $token) {      # Mutation name and input\\n    token                                 # JWT token returned\\n    user {                               # User object returned\\n      id                                 # User ID\\n      email                              # User email\\n      roles                              # User roles array\\n    }\\n  }\\n}\",\"variables\":{\"firebaseToken\":\"valid-firebase-token\"}}\n\n20:21:04.533 response time in milliseconds: 17\n1 < 200\n1 < Date: Sun, 01 Dec 2024 20:21:03 GMT\n1 < Content-Type: application\/json; charset=utf-8\n1 < Content-Length: 133\n{\"errors\":[{\"message\":\"invalid \\\"x-hasura-admin-secret\\\"\/\\\"x-hasura-access-key\\\"\",\"extensions\":{\"path\":\"$\",\"code\":\"access-denied\"}}]}\n\n"},{"result":{"nanos":102291,"millis":0.102291,"status":"passed"},"step":{"line":24,"prefix":"Then","index":2,"text":"status 200"}},{"result":{"nanos":14716084,"errorMessage":"match failed: EQUALS\n  $ | present (LIST:STRING)\n  [{\"message\":\"invalid \\\"x-hasura-admin-secret\\\"\/\\\"x-hasura-access-key\\\"\",\"extensions\":{\"path\":\"$\",\"code\":\"access-denied\"}}]\n  '#notpresent'\n\nkarate\/features\/auth\/login.feature:25","millis":14.716084,"status":"failed"},"step":{"line":25,"prefix":"And","index":3,"text":"match response.errors == '#notpresent'"},"stepLog":"20:21:04.556 karate\/features\/auth\/login.feature:25\nAnd match response.errors == '#notpresent'\nmatch failed: EQUALS\n  $ | present (LIST:STRING)\n  [{\"message\":\"invalid \\\"x-hasura-admin-secret\\\"\/\\\"x-hasura-access-key\\\"\",\"extensions\":{\"path\":\"$\",\"code\":\"access-denied\"}}]\n  '#notpresent'\n\nkarate\/features\/auth\/login.feature:25\n"},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":26,"prefix":"And","index":4,"text":"match response.data.loginWithFirebase contains { accessToken: '#present', refreshToken: '#present' }"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":27,"prefix":"*","index":5,"text":"def authToken = response.data.loginWithFirebase.accessToken"}}],"line":13,"description":"","durationMillis":160.981042,"failed":true,"error":"match failed: EQUALS\n  $ | present (LIST:STRING)\n  [{\"message\":\"invalid \\\"x-hasura-admin-secret\\\"\/\\\"x-hasura-access-key\\\"\",\"extensions\":{\"path\":\"$\",\"code\":\"access-denied\"}}]\n  '#notpresent'\n\nkarate\/features\/auth\/login.feature:25","tags":["auth"],"executorName":"main","name":"Valid Firebase Token Authentication","startTime":1733084464281,"refId":"[1:13]","endTime":1733084464556,"exampleIndex":-1},{"sectionIndex":1,"stepResults":[{"result":{"nanos":119625,"millis":0.119625,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url baseUrl"}},{"result":{"nanos":76417,"millis":0.076417,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"headers headers"}},{"result":{"nanos":4115500,"millis":4.1155,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def loginQuery = read('queries\/login-with-firebase.graphql')"}},{"result":{"nanos":249750,"millis":0.24975,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def testToken = 'valid-firebase-token'"}},{"result":{"nanos":1879459,"millis":1.879459,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def expiredToken = 'expired-firebase-token'"}},{"result":{"nanos":535584,"millis":0.535584,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def invalidToken = 'invalid-token'"}},{"result":{"nanos":1191292,"millis":1.191292,"status":"passed"},"step":{"endLine":38,"line":30,"prefix":"Given","docString":"{\n    query: '#(loginQuery)',\n    variables: {\n        firebaseToken: '#(expiredToken)'\n    }\n}","index":0,"text":"request"}},{"result":{"nanos":10504041,"millis":10.504041,"status":"passed"},"step":{"line":39,"prefix":"When","index":1,"text":"method POST"},"stepLog":"20:21:04.586 request:\n1 > POST http:\/\/localhost:8080\/v1\/graphql\n1 > Content-Type: application\/json; charset=UTF-8\n1 > X-Hasura-Admin-Secret: \n1 > Content-Length: 493\n1 > Host: localhost:8080\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.14 (Java\/11.0.16)\n1 > Accept-Encoding: gzip,deflate\n{\"query\":\"mutation LoginWithFirebase($token: String!) {\\n  loginWithFirebase(token: $token) {      # Mutation name and input\\n    token                                 # JWT token returned\\n    user {                               # User object returned\\n      id                                 # User ID\\n      email                              # User email\\n      roles                              # User roles array\\n    }\\n  }\\n}\",\"variables\":{\"firebaseToken\":\"expired-firebase-token\"}}\n\n20:21:04.592 response time in milliseconds: 4\n1 < 200\n1 < Date: Sun, 01 Dec 2024 20:21:03 GMT\n1 < Content-Type: application\/json; charset=utf-8\n1 < Content-Length: 133\n{\"errors\":[{\"message\":\"invalid \\\"x-hasura-admin-secret\\\"\/\\\"x-hasura-access-key\\\"\",\"extensions\":{\"path\":\"$\",\"code\":\"access-denied\"}}]}\n\n"},{"result":{"nanos":16125,"millis":0.016125,"status":"passed"},"step":{"line":40,"prefix":"Then","index":2,"text":"status 200"}},{"result":{"nanos":2877834,"errorMessage":"match failed: CONTAINS\n  $ | actual does not contain expected (STRING:STRING)\n  'invalid \"x-hasura-admin-secret\"\/\"x-hasura-access-key\"'\n  'expired'\n\nkarate\/features\/auth\/login.feature:41","millis":2.877834,"status":"failed"},"step":{"line":41,"prefix":"And","index":3,"text":"match response.errors[0].message contains 'expired'"},"stepLog":"20:21:04.600 karate\/features\/auth\/login.feature:41\nAnd match response.errors[0].message contains 'expired'\nmatch failed: CONTAINS\n  $ | actual does not contain expected (STRING:STRING)\n  'invalid \"x-hasura-admin-secret\"\/\"x-hasura-access-key\"'\n  'expired'\n\nkarate\/features\/auth\/login.feature:41\n"}],"line":29,"description":"","durationMillis":21.565627,"failed":true,"error":"match failed: CONTAINS\n  $ | actual does not contain expected (STRING:STRING)\n  'invalid \"x-hasura-admin-secret\"\/\"x-hasura-access-key\"'\n  'expired'\n\nkarate\/features\/auth\/login.feature:41","executorName":"main","name":"Expired Token Rejection","startTime":1733084464571,"refId":"[2:29]","endTime":1733084464600,"exampleIndex":-1},{"sectionIndex":2,"stepResults":[{"result":{"nanos":59291,"millis":0.059291,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url baseUrl"}},{"result":{"nanos":54708,"millis":0.054708,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"headers headers"}},{"result":{"nanos":2246417,"millis":2.246417,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def loginQuery = read('queries\/login-with-firebase.graphql')"}},{"result":{"nanos":253500,"millis":0.2535,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def testToken = 'valid-firebase-token'"}},{"result":{"nanos":96667,"millis":0.096667,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def expiredToken = 'expired-firebase-token'"}},{"result":{"nanos":88708,"millis":0.088708,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def invalidToken = 'invalid-token'"}},{"result":{"nanos":464583,"millis":0.464583,"status":"passed"},"step":{"endLine":52,"line":44,"prefix":"Given","docString":"{\n    query: '#(loginQuery)',\n    variables: {\n        firebaseToken: '#(invalidToken)'\n    }\n}","index":0,"text":"request"}},{"result":{"nanos":5536458,"millis":5.536458,"status":"passed"},"step":{"line":53,"prefix":"When","index":1,"text":"method POST"},"stepLog":"20:21:04.615 request:\n1 > POST http:\/\/localhost:8080\/v1\/graphql\n1 > Content-Type: application\/json; charset=UTF-8\n1 > X-Hasura-Admin-Secret: \n1 > Content-Length: 484\n1 > Host: localhost:8080\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.14 (Java\/11.0.16)\n1 > Accept-Encoding: gzip,deflate\n{\"query\":\"mutation LoginWithFirebase($token: String!) {\\n  loginWithFirebase(token: $token) {      # Mutation name and input\\n    token                                 # JWT token returned\\n    user {                               # User object returned\\n      id                                 # User ID\\n      email                              # User email\\n      roles                              # User roles array\\n    }\\n  }\\n}\",\"variables\":{\"firebaseToken\":\"invalid-token\"}}\n\n20:21:04.618 response time in milliseconds: 1\n1 < 200\n1 < Date: Sun, 01 Dec 2024 20:21:03 GMT\n1 < Content-Type: application\/json; charset=utf-8\n1 < Content-Length: 133\n{\"errors\":[{\"message\":\"invalid \\\"x-hasura-admin-secret\\\"\/\\\"x-hasura-access-key\\\"\",\"extensions\":{\"path\":\"$\",\"code\":\"access-denied\"}}]}\n\n"},{"result":{"nanos":9667,"millis":0.009667,"status":"passed"},"step":{"line":54,"prefix":"Then","index":2,"text":"status 200"}},{"result":{"nanos":1072792,"millis":1.072792,"status":"passed"},"step":{"line":55,"prefix":"And","index":3,"text":"match response.errors[0].message contains 'invalid'"}}],"executorName":"main","line":43,"name":"Invalid Token Format","description":"","durationMillis":9.882791,"startTime":1733084464609,"failed":false,"refId":"[3:43]","endTime":1733084464621,"exampleIndex":-1}],"callDepth":0,"name":"Firebase Authentication Tests","description":"Test Firebase authentication and token management","resultDate":"2024-12-01 08:21:04 PM","durationMillis":192.42946,"passedCount":1}