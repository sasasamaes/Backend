{"failedCount":3,"prefixedPath":"karate\/features\/auth\/login.feature","packageQualifiedName":"karate.features.auth.login","loopIndex":-1,"relativePath":"karate\/features\/auth\/login.feature","scenarioResults":[{"sectionIndex":0,"stepResults":[{"result":{"nanos":956000,"millis":0.956,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url baseUrl"}},{"result":{"nanos":719959,"millis":0.719959,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"headers headers"}},{"result":{"nanos":6600000,"millis":6.6,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def loginQuery = read('queries\/login-with-firebase.graphql')"}},{"result":{"nanos":535916,"millis":0.535916,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def testToken = 'valid-firebase-token'"}},{"result":{"nanos":313667,"millis":0.313667,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def expiredToken = 'expired-firebase-token'"}},{"result":{"nanos":276500,"millis":0.2765,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def invalidToken = 'invalid-token'"}},{"result":{"nanos":16445625,"millis":16.445625,"status":"passed"},"step":{"endLine":22,"line":14,"prefix":"Given","docString":"{\n    query: '#(loginQuery)',\n    variables: {\n        firebaseToken: '#(testToken)'\n    }\n}","index":0,"text":"request"}},{"result":{"nanos":357667792,"errorMessage":"http call failed after 208 milliseconds for url: http:\/\/localhost:9695\/v1\/graphql\norg.apache.http.conn.HttpHostConnectException: Connect to localhost:9695 [localhost\/127.0.0.1, localhost\/0:0:0:0:0:0:0:1] failed: Connection refused (Connection refused)\nkarate\/features\/auth\/login.feature:23","millis":357.667792,"status":"failed"},"step":{"line":23,"prefix":"When","index":1,"text":"method POST"},"stepLog":"20:29:56.424 request:\n1 > POST http:\/\/localhost:9695\/v1\/graphql\n1 > Content-Type: application\/json; charset=UTF-8\n1 > X-Hasura-Admin-Secret: \n1 > Content-Length: 491\n1 > Host: localhost:9695\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.14 (Java\/11.0.16)\n1 > Accept-Encoding: gzip,deflate\n{\"query\":\"mutation LoginWithFirebase($token: String!) {\\n  loginWithFirebase(token: $token) {      # Mutation name and input\\n    token                                 # JWT token returned\\n    user {                               # User object returned\\n      id                                 # User ID\\n      email                              # User email\\n      roles                              # User roles array\\n    }\\n  }\\n}\",\"variables\":{\"firebaseToken\":\"valid-firebase-token\"}}\n\n20:29:56.442 org.apache.http.conn.HttpHostConnectException: Connect to localhost:9695 [localhost\/127.0.0.1, localhost\/0:0:0:0:0:0:0:1] failed: Connection refused (Connection refused), http call failed after 208 milliseconds for url: http:\/\/localhost:9695\/v1\/graphql\n20:29:56.449 karate\/features\/auth\/login.feature:23\nWhen method POST\nhttp call failed after 208 milliseconds for url: http:\/\/localhost:9695\/v1\/graphql\norg.apache.http.conn.HttpHostConnectException: Connect to localhost:9695 [localhost\/127.0.0.1, localhost\/0:0:0:0:0:0:0:1] failed: Connection refused (Connection refused)\nkarate\/features\/auth\/login.feature:23\n"},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":24,"prefix":"Then","index":2,"text":"status 200"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":25,"prefix":"And","index":3,"text":"match response.errors == '#notpresent'"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":26,"prefix":"And","index":4,"text":"match response.data.loginWithFirebase contains { accessToken: '#present', refreshToken: '#present' }"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":27,"prefix":"*","index":5,"text":"def authToken = response.data.loginWithFirebase.accessToken"}}],"line":13,"description":"","durationMillis":383.515459,"failed":true,"error":"http call failed after 208 milliseconds for url: http:\/\/localhost:9695\/v1\/graphql\norg.apache.http.conn.HttpHostConnectException: Connect to localhost:9695 [localhost\/127.0.0.1, localhost\/0:0:0:0:0:0:0:1] failed: Connection refused (Connection refused)\nkarate\/features\/auth\/login.feature:23","tags":["auth"],"executorName":"main","name":"Valid Firebase Token Authentication","startTime":1733084995839,"refId":"[1:13]","endTime":1733084996449,"exampleIndex":-1},{"sectionIndex":1,"stepResults":[{"result":{"nanos":178083,"millis":0.178083,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url baseUrl"}},{"result":{"nanos":156833,"millis":0.156833,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"headers headers"}},{"result":{"nanos":2618916,"millis":2.618916,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def loginQuery = read('queries\/login-with-firebase.graphql')"}},{"result":{"nanos":534417,"millis":0.534417,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def testToken = 'valid-firebase-token'"}},{"result":{"nanos":281459,"millis":0.281459,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def expiredToken = 'expired-firebase-token'"}},{"result":{"nanos":244000,"millis":0.244,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def invalidToken = 'invalid-token'"}},{"result":{"nanos":579625,"millis":0.579625,"status":"passed"},"step":{"endLine":38,"line":30,"prefix":"Given","docString":"{\n    query: '#(loginQuery)',\n    variables: {\n        firebaseToken: '#(expiredToken)'\n    }\n}","index":0,"text":"request"}},{"result":{"nanos":2363833,"errorMessage":"http call failed after 2 milliseconds for url: http:\/\/localhost:9695\/v1\/graphql\norg.apache.http.conn.HttpHostConnectException: Connect to localhost:9695 [localhost\/127.0.0.1, localhost\/0:0:0:0:0:0:0:1] failed: Connection refused (Connection refused)\nkarate\/features\/auth\/login.feature:39","millis":2.363833,"status":"failed"},"step":{"line":39,"prefix":"When","index":1,"text":"method POST"},"stepLog":"20:29:56.481 request:\n1 > POST http:\/\/localhost:9695\/v1\/graphql\n1 > Content-Type: application\/json; charset=UTF-8\n1 > X-Hasura-Admin-Secret: \n1 > Content-Length: 493\n1 > Host: localhost:9695\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.14 (Java\/11.0.16)\n1 > Accept-Encoding: gzip,deflate\n{\"query\":\"mutation LoginWithFirebase($token: String!) {\\n  loginWithFirebase(token: $token) {      # Mutation name and input\\n    token                                 # JWT token returned\\n    user {                               # User object returned\\n      id                                 # User ID\\n      email                              # User email\\n      roles                              # User roles array\\n    }\\n  }\\n}\",\"variables\":{\"firebaseToken\":\"expired-firebase-token\"}}\n\n20:29:56.482 org.apache.http.conn.HttpHostConnectException: Connect to localhost:9695 [localhost\/127.0.0.1, localhost\/0:0:0:0:0:0:0:1] failed: Connection refused (Connection refused), http call failed after 2 milliseconds for url: http:\/\/localhost:9695\/v1\/graphql\n20:29:56.483 karate\/features\/auth\/login.feature:39\nWhen method POST\nhttp call failed after 2 milliseconds for url: http:\/\/localhost:9695\/v1\/graphql\norg.apache.http.conn.HttpHostConnectException: Connect to localhost:9695 [localhost\/127.0.0.1, localhost\/0:0:0:0:0:0:0:1] failed: Connection refused (Connection refused)\nkarate\/features\/auth\/login.feature:39\n"},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":40,"prefix":"Then","index":2,"text":"status 200"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":41,"prefix":"And","index":3,"text":"match response.errors[0].message contains 'expired'"}}],"line":29,"description":"","durationMillis":6.957166,"failed":true,"error":"http call failed after 2 milliseconds for url: http:\/\/localhost:9695\/v1\/graphql\norg.apache.http.conn.HttpHostConnectException: Connect to localhost:9695 [localhost\/127.0.0.1, localhost\/0:0:0:0:0:0:0:1] failed: Connection refused (Connection refused)\nkarate\/features\/auth\/login.feature:39","executorName":"main","name":"Expired Token Rejection","startTime":1733084996461,"refId":"[2:29]","endTime":1733084996483,"exampleIndex":-1},{"sectionIndex":2,"stepResults":[{"result":{"nanos":88542,"millis":0.088542,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url baseUrl"}},{"result":{"nanos":69041,"millis":0.069041,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"headers headers"}},{"result":{"nanos":954334,"millis":0.954334,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def loginQuery = read('queries\/login-with-firebase.graphql')"}},{"result":{"nanos":167500,"millis":0.1675,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def testToken = 'valid-firebase-token'"}},{"result":{"nanos":132250,"millis":0.13225,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def expiredToken = 'expired-firebase-token'"}},{"result":{"nanos":476541,"millis":0.476541,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def invalidToken = 'invalid-token'"}},{"result":{"nanos":588291,"millis":0.588291,"status":"passed"},"step":{"endLine":52,"line":44,"prefix":"Given","docString":"{\n    query: '#(loginQuery)',\n    variables: {\n        firebaseToken: '#(invalidToken)'\n    }\n}","index":0,"text":"request"}},{"result":{"nanos":3168250,"errorMessage":"http call failed after 2 milliseconds for url: http:\/\/localhost:9695\/v1\/graphql\norg.apache.http.conn.HttpHostConnectException: Connect to localhost:9695 [localhost\/127.0.0.1, localhost\/0:0:0:0:0:0:0:1] failed: Connection refused (Connection refused)\nkarate\/features\/auth\/login.feature:53","millis":3.16825,"status":"failed"},"step":{"line":53,"prefix":"When","index":1,"text":"method POST"},"stepLog":"20:29:56.493 request:\n1 > POST http:\/\/localhost:9695\/v1\/graphql\n1 > Content-Type: application\/json; charset=UTF-8\n1 > X-Hasura-Admin-Secret: \n1 > Content-Length: 484\n1 > Host: localhost:9695\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.14 (Java\/11.0.16)\n1 > Accept-Encoding: gzip,deflate\n{\"query\":\"mutation LoginWithFirebase($token: String!) {\\n  loginWithFirebase(token: $token) {      # Mutation name and input\\n    token                                 # JWT token returned\\n    user {                               # User object returned\\n      id                                 # User ID\\n      email                              # User email\\n      roles                              # User roles array\\n    }\\n  }\\n}\",\"variables\":{\"firebaseToken\":\"invalid-token\"}}\n\n20:29:56.495 org.apache.http.conn.HttpHostConnectException: Connect to localhost:9695 [localhost\/127.0.0.1, localhost\/0:0:0:0:0:0:0:1] failed: Connection refused (Connection refused), http call failed after 2 milliseconds for url: http:\/\/localhost:9695\/v1\/graphql\n20:29:56.497 karate\/features\/auth\/login.feature:53\nWhen method POST\nhttp call failed after 2 milliseconds for url: http:\/\/localhost:9695\/v1\/graphql\norg.apache.http.conn.HttpHostConnectException: Connect to localhost:9695 [localhost\/127.0.0.1, localhost\/0:0:0:0:0:0:0:1] failed: Connection refused (Connection refused)\nkarate\/features\/auth\/login.feature:53\n"},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":54,"prefix":"Then","index":2,"text":"status 200"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":55,"prefix":"And","index":3,"text":"match response.errors[0].message contains 'invalid'"}}],"line":43,"description":"","durationMillis":5.644749,"failed":true,"error":"http call failed after 2 milliseconds for url: http:\/\/localhost:9695\/v1\/graphql\norg.apache.http.conn.HttpHostConnectException: Connect to localhost:9695 [localhost\/127.0.0.1, localhost\/0:0:0:0:0:0:0:1] failed: Connection refused (Connection refused)\nkarate\/features\/auth\/login.feature:53","executorName":"main","name":"Invalid Token Format","startTime":1733084996486,"refId":"[3:43]","endTime":1733084996497,"exampleIndex":-1}],"callDepth":0,"name":"Firebase Authentication Tests","description":"Test Firebase authentication and token management","resultDate":"2024-12-01 08:29:56 PM","durationMillis":396.117374,"passedCount":0}