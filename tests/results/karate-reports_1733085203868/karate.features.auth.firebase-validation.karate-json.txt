{"failedCount":3,"prefixedPath":"karate\/features\/auth\/firebase-validation.feature","packageQualifiedName":"karate.features.auth.firebase-validation","loopIndex":-1,"relativePath":"karate\/features\/auth\/firebase-validation.feature","scenarioResults":[{"sectionIndex":0,"stepResults":[{"result":{"nanos":107459,"millis":0.107459,"status":"passed"},"step":{"background":true,"line":4,"prefix":"*","index":0,"text":"url baseUrl"}},{"result":{"nanos":39750,"millis":0.03975,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":1,"text":"headers headers"}},{"result":{"nanos":2630459,"millis":2.630459,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":2,"text":"def loginQuery = read('queries\/login-with-firebase.graphql')"}},{"result":{"nanos":443875,"millis":0.443875,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":3,"text":"def testToken = 'valid-firebase-token'"}},{"result":{"nanos":175750,"millis":0.17575,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":4,"text":"def expiredToken = 'expired-firebase-token'"}},{"result":{"nanos":3013792,"millis":3.013792,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":5,"text":"def invalidToken = 'invalid-token'"}},{"result":{"nanos":565958,"millis":0.565958,"status":"passed"},"step":{"endLine":21,"line":13,"prefix":"Given","docString":"{\n  \"query\": \"#(loginQuery)\",\n  \"variables\": {\n     \"token\": \"#(testToken)\"\n   }\n}","index":0,"text":"request"}},{"result":{"nanos":3877208,"errorMessage":"http call failed after 3 milliseconds for url: http:\/\/localhost:9695\/v1\/graphql\norg.apache.http.conn.HttpHostConnectException: Connect to localhost:9695 [localhost\/127.0.0.1, localhost\/0:0:0:0:0:0:0:1] failed: Connection refused (Connection refused)\nkarate\/features\/auth\/firebase-validation.feature:22","millis":3.877208,"status":"failed"},"step":{"line":22,"prefix":"When","index":1,"text":"method POST"},"stepLog":"20:29:57.510 request:\n1 > POST http:\/\/localhost:9695\/v1\/graphql\n1 > Content-Type: application\/json; charset=UTF-8\n1 > X-Hasura-Admin-Secret: \n1 > Content-Length: 483\n1 > Host: localhost:9695\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.14 (Java\/11.0.16)\n1 > Accept-Encoding: gzip,deflate\n{\"query\":\"mutation LoginWithFirebase($token: String!) {\\n  loginWithFirebase(token: $token) {      # Mutation name and input\\n    token                                 # JWT token returned\\n    user {                               # User object returned\\n      id                                 # User ID\\n      email                              # User email\\n      roles                              # User roles array\\n    }\\n  }\\n}\",\"variables\":{\"token\":\"valid-firebase-token\"}}\n\n20:29:57.512 org.apache.http.conn.HttpHostConnectException: Connect to localhost:9695 [localhost\/127.0.0.1, localhost\/0:0:0:0:0:0:0:1] failed: Connection refused (Connection refused), http call failed after 3 milliseconds for url: http:\/\/localhost:9695\/v1\/graphql\n20:29:57.513 karate\/features\/auth\/firebase-validation.feature:22\nWhen method POST\nhttp call failed after 3 milliseconds for url: http:\/\/localhost:9695\/v1\/graphql\norg.apache.http.conn.HttpHostConnectException: Connect to localhost:9695 [localhost\/127.0.0.1, localhost\/0:0:0:0:0:0:0:1] failed: Connection refused (Connection refused)\nkarate\/features\/auth\/firebase-validation.feature:22\n"},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":23,"prefix":"Then","index":2,"text":"status 200"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":24,"prefix":"And","index":3,"text":"match response.errors == '#notpresent'"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":25,"prefix":"And","index":4,"text":"match response.data.loginWithFirebase contains { token: '#present', user: '#present' }"}}],"line":12,"description":"","durationMillis":10.854251,"failed":true,"error":"http call failed after 3 milliseconds for url: http:\/\/localhost:9695\/v1\/graphql\norg.apache.http.conn.HttpHostConnectException: Connect to localhost:9695 [localhost\/127.0.0.1, localhost\/0:0:0:0:0:0:0:1] failed: Connection refused (Connection refused)\nkarate\/features\/auth\/firebase-validation.feature:22","tags":["auth"],"executorName":"main","name":"Valid Firebase Token Authentication","startTime":1733084997486,"refId":"[1:12]","endTime":1733084997513,"exampleIndex":-1},{"sectionIndex":1,"stepResults":[{"result":{"nanos":37416,"millis":0.037416,"status":"passed"},"step":{"background":true,"line":4,"prefix":"*","index":0,"text":"url baseUrl"}},{"result":{"nanos":30459,"millis":0.030459,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":1,"text":"headers headers"}},{"result":{"nanos":2506125,"millis":2.506125,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":2,"text":"def loginQuery = read('queries\/login-with-firebase.graphql')"}},{"result":{"nanos":139625,"millis":0.139625,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":3,"text":"def testToken = 'valid-firebase-token'"}},{"result":{"nanos":69667,"millis":0.069667,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":4,"text":"def expiredToken = 'expired-firebase-token'"}},{"result":{"nanos":49916,"millis":0.049916,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":5,"text":"def invalidToken = 'invalid-token'"}},{"result":{"nanos":446125,"millis":0.446125,"status":"passed"},"step":{"endLine":36,"line":28,"prefix":"Given","docString":"{\n  \"query\": \"#(loginQuery)\",\n  \"variables\": {\n     \"token\": \"#(expiredToken)\"\n   }\n}","index":0,"text":"request"}},{"result":{"nanos":5619875,"errorMessage":"http call failed after 4 milliseconds for url: http:\/\/localhost:9695\/v1\/graphql\norg.apache.http.conn.HttpHostConnectException: Connect to localhost:9695 [localhost\/127.0.0.1, localhost\/0:0:0:0:0:0:0:1] failed: Connection refused (Connection refused)\nkarate\/features\/auth\/firebase-validation.feature:37","millis":5.619875,"status":"failed"},"step":{"line":37,"prefix":"When","index":1,"text":"method POST"},"stepLog":"20:29:57.522 request:\n1 > POST http:\/\/localhost:9695\/v1\/graphql\n1 > Content-Type: application\/json; charset=UTF-8\n1 > X-Hasura-Admin-Secret: \n1 > Content-Length: 485\n1 > Host: localhost:9695\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.14 (Java\/11.0.16)\n1 > Accept-Encoding: gzip,deflate\n{\"query\":\"mutation LoginWithFirebase($token: String!) {\\n  loginWithFirebase(token: $token) {      # Mutation name and input\\n    token                                 # JWT token returned\\n    user {                               # User object returned\\n      id                                 # User ID\\n      email                              # User email\\n      roles                              # User roles array\\n    }\\n  }\\n}\",\"variables\":{\"token\":\"expired-firebase-token\"}}\n\n20:29:57.525 org.apache.http.conn.HttpHostConnectException: Connect to localhost:9695 [localhost\/127.0.0.1, localhost\/0:0:0:0:0:0:0:1] failed: Connection refused (Connection refused), http call failed after 4 milliseconds for url: http:\/\/localhost:9695\/v1\/graphql\n20:29:57.526 karate\/features\/auth\/firebase-validation.feature:37\nWhen method POST\nhttp call failed after 4 milliseconds for url: http:\/\/localhost:9695\/v1\/graphql\norg.apache.http.conn.HttpHostConnectException: Connect to localhost:9695 [localhost\/127.0.0.1, localhost\/0:0:0:0:0:0:0:1] failed: Connection refused (Connection refused)\nkarate\/features\/auth\/firebase-validation.feature:37\n"},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":38,"prefix":"Then","index":2,"text":"status 200"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":39,"prefix":"And","index":3,"text":"match response.errors[0].message contains 'expired'"}}],"line":27,"description":"","durationMillis":8.899208,"failed":true,"error":"http call failed after 4 milliseconds for url: http:\/\/localhost:9695\/v1\/graphql\norg.apache.http.conn.HttpHostConnectException: Connect to localhost:9695 [localhost\/127.0.0.1, localhost\/0:0:0:0:0:0:0:1] failed: Connection refused (Connection refused)\nkarate\/features\/auth\/firebase-validation.feature:37","executorName":"main","name":"Expired Token Rejection","startTime":1733084997515,"refId":"[2:27]","endTime":1733084997526,"exampleIndex":-1},{"sectionIndex":2,"stepResults":[{"result":{"nanos":94709,"millis":0.094709,"status":"passed"},"step":{"background":true,"line":4,"prefix":"*","index":0,"text":"url baseUrl"}},{"result":{"nanos":96125,"millis":0.096125,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":1,"text":"headers headers"}},{"result":{"nanos":4508209,"millis":4.508209,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":2,"text":"def loginQuery = read('queries\/login-with-firebase.graphql')"}},{"result":{"nanos":183834,"millis":0.183834,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":3,"text":"def testToken = 'valid-firebase-token'"}},{"result":{"nanos":51666,"millis":0.051666,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":4,"text":"def expiredToken = 'expired-firebase-token'"}},{"result":{"nanos":55042,"millis":0.055042,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":5,"text":"def invalidToken = 'invalid-token'"}},{"result":{"nanos":1639542,"millis":1.639542,"status":"passed"},"step":{"endLine":50,"line":42,"prefix":"Given","docString":"{\n  \"query\": \"#(loginQuery)\",\n  \"variables\": {\n     \"token\": \"#(invalidToken)\"\n   }\n}","index":0,"text":"request"}},{"result":{"nanos":6956916,"errorMessage":"http call failed after 5 milliseconds for url: http:\/\/localhost:9695\/v1\/graphql\norg.apache.http.conn.HttpHostConnectException: Connect to localhost:9695 [localhost\/127.0.0.1, localhost\/0:0:0:0:0:0:0:1] failed: Connection refused (Connection refused)\nkarate\/features\/auth\/firebase-validation.feature:51","millis":6.956916,"status":"failed"},"step":{"line":51,"prefix":"When","index":1,"text":"method POST"},"stepLog":"20:29:57.554 request:\n1 > POST http:\/\/localhost:9695\/v1\/graphql\n1 > Content-Type: application\/json; charset=UTF-8\n1 > X-Hasura-Admin-Secret: \n1 > Content-Length: 476\n1 > Host: localhost:9695\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.14 (Java\/11.0.16)\n1 > Accept-Encoding: gzip,deflate\n{\"query\":\"mutation LoginWithFirebase($token: String!) {\\n  loginWithFirebase(token: $token) {      # Mutation name and input\\n    token                                 # JWT token returned\\n    user {                               # User object returned\\n      id                                 # User ID\\n      email                              # User email\\n      roles                              # User roles array\\n    }\\n  }\\n}\",\"variables\":{\"token\":\"invalid-token\"}}\n\n20:29:57.555 org.apache.http.conn.HttpHostConnectException: Connect to localhost:9695 [localhost\/127.0.0.1, localhost\/0:0:0:0:0:0:0:1] failed: Connection refused (Connection refused), http call failed after 5 milliseconds for url: http:\/\/localhost:9695\/v1\/graphql\n20:29:57.556 karate\/features\/auth\/firebase-validation.feature:51\nWhen method POST\nhttp call failed after 5 milliseconds for url: http:\/\/localhost:9695\/v1\/graphql\norg.apache.http.conn.HttpHostConnectException: Connect to localhost:9695 [localhost\/127.0.0.1, localhost\/0:0:0:0:0:0:0:1] failed: Connection refused (Connection refused)\nkarate\/features\/auth\/firebase-validation.feature:51\n"},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":52,"prefix":"Then","index":2,"text":"status 200"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":53,"prefix":"And","index":3,"text":"match response.errors[0].message contains 'invalid'"}}],"line":41,"description":"","durationMillis":13.586043,"failed":true,"error":"http call failed after 5 milliseconds for url: http:\/\/localhost:9695\/v1\/graphql\norg.apache.http.conn.HttpHostConnectException: Connect to localhost:9695 [localhost\/127.0.0.1, localhost\/0:0:0:0:0:0:0:1] failed: Connection refused (Connection refused)\nkarate\/features\/auth\/firebase-validation.feature:51","executorName":"main","name":"Invalid Token Format","startTime":1733084997538,"refId":"[3:41]","endTime":1733084997556,"exampleIndex":-1}],"callDepth":0,"name":"Firebase Token Validation Tests","description":"","resultDate":"2024-12-01 08:29:57 PM","durationMillis":33.339502,"passedCount":0}