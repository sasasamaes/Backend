{"failedCount":4,"prefixedPath":"karate\/features\/users\/roles.feature","packageQualifiedName":"karate.features.users.roles","loopIndex":-1,"relativePath":"karate\/features\/users\/roles.feature","scenarioResults":[{"sectionIndex":0,"stepResults":[{"result":{"nanos":77208,"millis":0.077208,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url baseUrl"}},{"result":{"nanos":27958,"millis":0.027958,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"headers headers"}},{"result":{"nanos":20661083,"millis":20.661083,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"call read('..\/auth\/login.feature@login')"},"callResults":[{"failedCount":0,"prefixedPath":"karate\/features\/users\/..\/auth\/login.feature","packageQualifiedName":"karate.features.users.auth.login","loopIndex":-1,"relativePath":"karate\/features\/users\/..\/auth\/login.feature","scenarioResults":[],"callDepth":1,"name":"Firebase Authentication Tests","description":"Test Firebase authentication and token management","resultDate":"2024-12-01 08:29:58 PM","durationMillis":0.0,"passedCount":0}]},{"result":{"nanos":1783291,"errorMessage":"js failed:\n>>>>\n01: response.data.loginWithFirebase.accessToken\n<<<<\norg.graalvm.polyglot.PolyglotException: ReferenceError: \"response\" is not defined\n- <js>.:program(Unnamed:1)\n\nkarate\/features\/users\/roles.feature:8","millis":1.783291,"status":"failed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def authToken = response.data.loginWithFirebase.accessToken"},"stepLog":"20:29:58.891 karate\/features\/users\/roles.feature:8\n* def authToken = response.data.loginWithFirebase.accessToken\njs failed:\n>>>>\n01: response.data.loginWithFirebase.accessToken\n<<<<\norg.graalvm.polyglot.PolyglotException: ReferenceError: \"response\" is not defined\n- <js>.:program(Unnamed:1)\n\nkarate\/features\/users\/roles.feature:8\n"},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":11,"prefix":"*","index":0,"text":"def verifyTenantQuery = read('queries\/verify-tenant-role.graphql')"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":12,"prefix":"Given","index":1,"text":"request { query: '#(verifyTenantQuery)' }"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":13,"prefix":"When","index":2,"text":"method POST"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":14,"prefix":"Then","index":3,"text":"status 200"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":15,"prefix":"And","index":4,"text":"match response.data.currentUser.roles contains 'tenant'"}}],"line":10,"description":"","durationMillis":22.54954,"failed":true,"error":"js failed:\n>>>>\n01: response.data.loginWithFirebase.accessToken\n<<<<\norg.graalvm.polyglot.PolyglotException: ReferenceError: \"response\" is not defined\n- <js>.:program(Unnamed:1)\n\nkarate\/features\/users\/roles.feature:8","executorName":"main","name":"Verify Tenant Role","startTime":1733084998866,"refId":"[1:10]","endTime":1733084998891,"exampleIndex":-1},{"sectionIndex":1,"stepResults":[{"result":{"nanos":43417,"millis":0.043417,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url baseUrl"}},{"result":{"nanos":24167,"millis":0.024167,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"headers headers"}},{"result":{"nanos":1506708,"millis":1.506708,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"call read('..\/auth\/login.feature@login')"},"callResults":[{"failedCount":0,"prefixedPath":"karate\/features\/users\/..\/auth\/login.feature","packageQualifiedName":"karate.features.users.auth.login","loopIndex":-1,"relativePath":"karate\/features\/users\/..\/auth\/login.feature","scenarioResults":[],"callDepth":1,"name":"Firebase Authentication Tests","description":"Test Firebase authentication and token management","resultDate":"2024-12-01 08:29:58 PM","durationMillis":0.0,"passedCount":0}]},{"result":{"nanos":652208,"errorMessage":"js failed:\n>>>>\n01: response.data.loginWithFirebase.accessToken\n<<<<\norg.graalvm.polyglot.PolyglotException: ReferenceError: \"response\" is not defined\n- <js>.:program(Unnamed:1)\n\nkarate\/features\/users\/roles.feature:8","millis":0.652208,"status":"failed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def authToken = response.data.loginWithFirebase.accessToken"},"stepLog":"20:29:58.900 karate\/features\/users\/roles.feature:8\n* def authToken = response.data.loginWithFirebase.accessToken\njs failed:\n>>>>\n01: response.data.loginWithFirebase.accessToken\n<<<<\norg.graalvm.polyglot.PolyglotException: ReferenceError: \"response\" is not defined\n- <js>.:program(Unnamed:1)\n\nkarate\/features\/users\/roles.feature:8\n"},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":18,"prefix":"*","index":0,"text":"def verifyLandlordQuery = read('queries\/verify-landlord-role.graphql')"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":19,"prefix":"Given","index":1,"text":"request { query: '#(verifyLandlordQuery)' }"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":20,"prefix":"When","index":2,"text":"method POST"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":21,"prefix":"Then","index":3,"text":"status 200"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":22,"prefix":"And","index":4,"text":"match response.data.currentUser.roles contains 'landlord'"}}],"line":17,"description":"","durationMillis":2.2265,"failed":true,"error":"js failed:\n>>>>\n01: response.data.loginWithFirebase.accessToken\n<<<<\norg.graalvm.polyglot.PolyglotException: ReferenceError: \"response\" is not defined\n- <js>.:program(Unnamed:1)\n\nkarate\/features\/users\/roles.feature:8","executorName":"main","name":"Verify Landlord Role","startTime":1733084998896,"refId":"[2:17]","endTime":1733084998900,"exampleIndex":-1},{"sectionIndex":2,"stepResults":[{"result":{"nanos":31334,"millis":0.031334,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url baseUrl"}},{"result":{"nanos":27291,"millis":0.027291,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"headers headers"}},{"result":{"nanos":2474000,"millis":2.474,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"call read('..\/auth\/login.feature@login')"},"callResults":[{"failedCount":0,"prefixedPath":"karate\/features\/users\/..\/auth\/login.feature","packageQualifiedName":"karate.features.users.auth.login","loopIndex":-1,"relativePath":"karate\/features\/users\/..\/auth\/login.feature","scenarioResults":[],"callDepth":1,"name":"Firebase Authentication Tests","description":"Test Firebase authentication and token management","resultDate":"2024-12-01 08:29:58 PM","durationMillis":0.0,"passedCount":0}]},{"result":{"nanos":1223958,"errorMessage":"js failed:\n>>>>\n01: response.data.loginWithFirebase.accessToken\n<<<<\norg.graalvm.polyglot.PolyglotException: ReferenceError: \"response\" is not defined\n- <js>.:program(Unnamed:1)\n\nkarate\/features\/users\/roles.feature:8","millis":1.223958,"status":"failed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def authToken = response.data.loginWithFirebase.accessToken"},"stepLog":"20:29:58.906 karate\/features\/users\/roles.feature:8\n* def authToken = response.data.loginWithFirebase.accessToken\njs failed:\n>>>>\n01: response.data.loginWithFirebase.accessToken\n<<<<\norg.graalvm.polyglot.PolyglotException: ReferenceError: \"response\" is not defined\n- <js>.:program(Unnamed:1)\n\nkarate\/features\/users\/roles.feature:8\n"},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":25,"prefix":"*","index":0,"text":"def checkPermissionsQuery = read('queries\/check-role-permissions.graphql')"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":26,"prefix":"Given","index":1,"text":"request { query: '#(checkPermissionsQuery)', variables: { roleId: 'tenant', resource: 'properties' } }"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":27,"prefix":"When","index":2,"text":"method POST"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":28,"prefix":"Then","index":3,"text":"status 200"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":29,"prefix":"And","index":4,"text":"match response.data.checkRolePermissions contains { hasAccess: '#boolean' }"}}],"line":24,"description":"","durationMillis":3.756583,"failed":true,"error":"js failed:\n>>>>\n01: response.data.loginWithFirebase.accessToken\n<<<<\norg.graalvm.polyglot.PolyglotException: ReferenceError: \"response\" is not defined\n- <js>.:program(Unnamed:1)\n\nkarate\/features\/users\/roles.feature:8","executorName":"main","name":"Check Role Permissions","startTime":1733084998901,"refId":"[3:24]","endTime":1733084998906,"exampleIndex":-1},{"sectionIndex":3,"stepResults":[{"result":{"nanos":583584,"millis":0.583584,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url baseUrl"}},{"result":{"nanos":232583,"millis":0.232583,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"headers headers"}},{"result":{"nanos":1780750,"millis":1.78075,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"call read('..\/auth\/login.feature@login')"},"callResults":[{"failedCount":0,"prefixedPath":"karate\/features\/users\/..\/auth\/login.feature","packageQualifiedName":"karate.features.users.auth.login","loopIndex":-1,"relativePath":"karate\/features\/users\/..\/auth\/login.feature","scenarioResults":[],"callDepth":1,"name":"Firebase Authentication Tests","description":"Test Firebase authentication and token management","resultDate":"2024-12-01 08:29:58 PM","durationMillis":0.0,"passedCount":0}]},{"result":{"nanos":1501209,"errorMessage":"js failed:\n>>>>\n01: response.data.loginWithFirebase.accessToken\n<<<<\norg.graalvm.polyglot.PolyglotException: ReferenceError: \"response\" is not defined\n- <js>.:program(Unnamed:1)\n\nkarate\/features\/users\/roles.feature:8","millis":1.501209,"status":"failed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def authToken = response.data.loginWithFirebase.accessToken"},"stepLog":"20:29:58.914 karate\/features\/users\/roles.feature:8\n* def authToken = response.data.loginWithFirebase.accessToken\njs failed:\n>>>>\n01: response.data.loginWithFirebase.accessToken\n<<<<\norg.graalvm.polyglot.PolyglotException: ReferenceError: \"response\" is not defined\n- <js>.:program(Unnamed:1)\n\nkarate\/features\/users\/roles.feature:8\n"},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":32,"prefix":"*","index":0,"text":"def roleTransitionMutation = read('queries\/role-transition.graphql')"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":33,"prefix":"*","index":1,"text":"def transitionInput = { fromRole: 'tenant', toRole: 'landlord' }"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":34,"prefix":"Given","index":2,"text":"request { query: '#(roleTransitionMutation)', variables: { input: '#(transitionInput)' } }"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":35,"prefix":"When","index":3,"text":"method POST"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":36,"prefix":"Then","index":4,"text":"status 200"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":37,"prefix":"And","index":5,"text":"match response.data.initiateRoleTransition contains { success: '#boolean', transitionId: '#present' }"}}],"line":31,"description":"","durationMillis":4.098126,"failed":true,"error":"js failed:\n>>>>\n01: response.data.loginWithFirebase.accessToken\n<<<<\norg.graalvm.polyglot.PolyglotException: ReferenceError: \"response\" is not defined\n- <js>.:program(Unnamed:1)\n\nkarate\/features\/users\/roles.feature:8","executorName":"main","name":"Role Transition","startTime":1733084998908,"refId":"[4:31]","endTime":1733084998914,"exampleIndex":-1}],"callDepth":0,"name":"User Role Tests","description":"Test role management and verification","resultDate":"2024-12-01 08:29:58 PM","durationMillis":32.630749,"passedCount":0}