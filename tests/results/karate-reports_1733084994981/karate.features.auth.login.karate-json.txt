{"failedCount":3,"prefixedPath":"karate\/features\/auth\/login.feature","packageQualifiedName":"karate.features.auth.login","loopIndex":-1,"relativePath":"karate\/features\/auth\/login.feature","scenarioResults":[{"sectionIndex":0,"stepResults":[{"result":{"nanos":693333,"millis":0.693333,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url baseUrl"}},{"result":{"nanos":598375,"millis":0.598375,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"headers headers"}},{"result":{"nanos":6039208,"millis":6.039208,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def loginQuery = read('queries\/login-with-firebase.graphql')"}},{"result":{"nanos":422459,"millis":0.422459,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def testToken = 'valid-firebase-token'"}},{"result":{"nanos":259458,"millis":0.259458,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def expiredToken = 'expired-firebase-token'"}},{"result":{"nanos":263125,"millis":0.263125,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def invalidToken = 'invalid-token'"}},{"result":{"nanos":13702625,"millis":13.702625,"status":"passed"},"step":{"endLine":22,"line":14,"prefix":"Given","docString":"{\n    query: '#(loginQuery)',\n    variables: {\n        firebaseToken: '#(testToken)'\n    }\n}","index":0,"text":"request"}},{"result":{"nanos":124987208,"errorMessage":"http call failed after 102 milliseconds for url: http:\/\/localhost:9695\/v1\/graphql\norg.apache.http.conn.HttpHostConnectException: Connect to localhost:9695 [localhost\/127.0.0.1, localhost\/0:0:0:0:0:0:0:1] failed: Connection refused (Connection refused)\nkarate\/features\/auth\/login.feature:23","millis":124.987208,"status":"failed"},"step":{"line":23,"prefix":"When","index":1,"text":"method POST"},"stepLog":"20:27:07.384 request:\n1 > POST http:\/\/localhost:9695\/v1\/graphql\n1 > Content-Type: application\/json; charset=UTF-8\n1 > X-Hasura-Admin-Secret: \n1 > Content-Length: 491\n1 > Host: localhost:9695\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.14 (Java\/11.0.16)\n1 > Accept-Encoding: gzip,deflate\n{\"query\":\"mutation LoginWithFirebase($token: String!) {\\n  loginWithFirebase(token: $token) {      # Mutation name and input\\n    token                                 # JWT token returned\\n    user {                               # User object returned\\n      id                                 # User ID\\n      email                              # User email\\n      roles                              # User roles array\\n    }\\n  }\\n}\",\"variables\":{\"firebaseToken\":\"valid-firebase-token\"}}\n\n20:27:07.396 org.apache.http.conn.HttpHostConnectException: Connect to localhost:9695 [localhost\/127.0.0.1, localhost\/0:0:0:0:0:0:0:1] failed: Connection refused (Connection refused), http call failed after 102 milliseconds for url: http:\/\/localhost:9695\/v1\/graphql\n20:27:07.400 karate\/features\/auth\/login.feature:23\nWhen method POST\nhttp call failed after 102 milliseconds for url: http:\/\/localhost:9695\/v1\/graphql\norg.apache.http.conn.HttpHostConnectException: Connect to localhost:9695 [localhost\/127.0.0.1, localhost\/0:0:0:0:0:0:0:1] failed: Connection refused (Connection refused)\nkarate\/features\/auth\/login.feature:23\n"},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":24,"prefix":"Then","index":2,"text":"status 200"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":25,"prefix":"And","index":3,"text":"match response.errors == '#notpresent'"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":26,"prefix":"And","index":4,"text":"match response.data.loginWithFirebase contains { accessToken: '#present', refreshToken: '#present' }"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":27,"prefix":"*","index":5,"text":"def authToken = response.data.loginWithFirebase.accessToken"}}],"line":13,"description":"","durationMillis":146.965791,"failed":true,"error":"http call failed after 102 milliseconds for url: http:\/\/localhost:9695\/v1\/graphql\norg.apache.http.conn.HttpHostConnectException: Connect to localhost:9695 [localhost\/127.0.0.1, localhost\/0:0:0:0:0:0:0:1] failed: Connection refused (Connection refused)\nkarate\/features\/auth\/login.feature:23","tags":["auth"],"executorName":"main","name":"Valid Firebase Token Authentication","startTime":1733084827117,"refId":"[1:13]","endTime":1733084827400,"exampleIndex":-1},{"sectionIndex":1,"stepResults":[{"result":{"nanos":92708,"millis":0.092708,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url baseUrl"}},{"result":{"nanos":56916,"millis":0.056916,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"headers headers"}},{"result":{"nanos":837625,"millis":0.837625,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def loginQuery = read('queries\/login-with-firebase.graphql')"}},{"result":{"nanos":139792,"millis":0.139792,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def testToken = 'valid-firebase-token'"}},{"result":{"nanos":133000,"millis":0.133,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def expiredToken = 'expired-firebase-token'"}},{"result":{"nanos":267500,"millis":0.2675,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def invalidToken = 'invalid-token'"}},{"result":{"nanos":722625,"millis":0.722625,"status":"passed"},"step":{"endLine":38,"line":30,"prefix":"Given","docString":"{\n    query: '#(loginQuery)',\n    variables: {\n        firebaseToken: '#(expiredToken)'\n    }\n}","index":0,"text":"request"}},{"result":{"nanos":2626667,"errorMessage":"http call failed after 2 milliseconds for url: http:\/\/localhost:9695\/v1\/graphql\norg.apache.http.conn.HttpHostConnectException: Connect to localhost:9695 [localhost\/127.0.0.1, localhost\/0:0:0:0:0:0:0:1] failed: Connection refused (Connection refused)\nkarate\/features\/auth\/login.feature:39","millis":2.626667,"status":"failed"},"step":{"line":39,"prefix":"When","index":1,"text":"method POST"},"stepLog":"20:27:07.411 request:\n1 > POST http:\/\/localhost:9695\/v1\/graphql\n1 > Content-Type: application\/json; charset=UTF-8\n1 > X-Hasura-Admin-Secret: \n1 > Content-Length: 493\n1 > Host: localhost:9695\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.14 (Java\/11.0.16)\n1 > Accept-Encoding: gzip,deflate\n{\"query\":\"mutation LoginWithFirebase($token: String!) {\\n  loginWithFirebase(token: $token) {      # Mutation name and input\\n    token                                 # JWT token returned\\n    user {                               # User object returned\\n      id                                 # User ID\\n      email                              # User email\\n      roles                              # User roles array\\n    }\\n  }\\n}\",\"variables\":{\"firebaseToken\":\"expired-firebase-token\"}}\n\n20:27:07.412 org.apache.http.conn.HttpHostConnectException: Connect to localhost:9695 [localhost\/127.0.0.1, localhost\/0:0:0:0:0:0:0:1] failed: Connection refused (Connection refused), http call failed after 2 milliseconds for url: http:\/\/localhost:9695\/v1\/graphql\n20:27:07.412 karate\/features\/auth\/login.feature:39\nWhen method POST\nhttp call failed after 2 milliseconds for url: http:\/\/localhost:9695\/v1\/graphql\norg.apache.http.conn.HttpHostConnectException: Connect to localhost:9695 [localhost\/127.0.0.1, localhost\/0:0:0:0:0:0:0:1] failed: Connection refused (Connection refused)\nkarate\/features\/auth\/login.feature:39\n"},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":40,"prefix":"Then","index":2,"text":"status 200"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":41,"prefix":"And","index":3,"text":"match response.errors[0].message contains 'expired'"}}],"line":29,"description":"","durationMillis":4.876833,"failed":true,"error":"http call failed after 2 milliseconds for url: http:\/\/localhost:9695\/v1\/graphql\norg.apache.http.conn.HttpHostConnectException: Connect to localhost:9695 [localhost\/127.0.0.1, localhost\/0:0:0:0:0:0:0:1] failed: Connection refused (Connection refused)\nkarate\/features\/auth\/login.feature:39","executorName":"main","name":"Expired Token Rejection","startTime":1733084827406,"refId":"[2:29]","endTime":1733084827412,"exampleIndex":-1},{"sectionIndex":2,"stepResults":[{"result":{"nanos":80167,"millis":0.080167,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url baseUrl"}},{"result":{"nanos":59292,"millis":0.059292,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"headers headers"}},{"result":{"nanos":1256000,"millis":1.256,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def loginQuery = read('queries\/login-with-firebase.graphql')"}},{"result":{"nanos":178458,"millis":0.178458,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def testToken = 'valid-firebase-token'"}},{"result":{"nanos":116166,"millis":0.116166,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def expiredToken = 'expired-firebase-token'"}},{"result":{"nanos":99167,"millis":0.099167,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":5,"text":"def invalidToken = 'invalid-token'"}},{"result":{"nanos":680167,"millis":0.680167,"status":"passed"},"step":{"endLine":52,"line":44,"prefix":"Given","docString":"{\n    query: '#(loginQuery)',\n    variables: {\n        firebaseToken: '#(invalidToken)'\n    }\n}","index":0,"text":"request"}},{"result":{"nanos":6764292,"errorMessage":"http call failed after 5 milliseconds for url: http:\/\/localhost:9695\/v1\/graphql\norg.apache.http.conn.HttpHostConnectException: Connect to localhost:9695 [localhost\/127.0.0.1, localhost\/0:0:0:0:0:0:0:1] failed: Connection refused (Connection refused)\nkarate\/features\/auth\/login.feature:53","millis":6.764292,"status":"failed"},"step":{"line":53,"prefix":"When","index":1,"text":"method POST"},"stepLog":"20:27:07.422 request:\n1 > POST http:\/\/localhost:9695\/v1\/graphql\n1 > Content-Type: application\/json; charset=UTF-8\n1 > X-Hasura-Admin-Secret: \n1 > Content-Length: 484\n1 > Host: localhost:9695\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.14 (Java\/11.0.16)\n1 > Accept-Encoding: gzip,deflate\n{\"query\":\"mutation LoginWithFirebase($token: String!) {\\n  loginWithFirebase(token: $token) {      # Mutation name and input\\n    token                                 # JWT token returned\\n    user {                               # User object returned\\n      id                                 # User ID\\n      email                              # User email\\n      roles                              # User roles array\\n    }\\n  }\\n}\",\"variables\":{\"firebaseToken\":\"invalid-token\"}}\n\n20:27:07.426 org.apache.http.conn.HttpHostConnectException: Connect to localhost:9695 [localhost\/127.0.0.1, localhost\/0:0:0:0:0:0:0:1] failed: Connection refused (Connection refused), http call failed after 5 milliseconds for url: http:\/\/localhost:9695\/v1\/graphql\n20:27:07.427 karate\/features\/auth\/login.feature:53\nWhen method POST\nhttp call failed after 5 milliseconds for url: http:\/\/localhost:9695\/v1\/graphql\norg.apache.http.conn.HttpHostConnectException: Connect to localhost:9695 [localhost\/127.0.0.1, localhost\/0:0:0:0:0:0:0:1] failed: Connection refused (Connection refused)\nkarate\/features\/auth\/login.feature:53\n"},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":54,"prefix":"Then","index":2,"text":"status 200"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":55,"prefix":"And","index":3,"text":"match response.errors[0].message contains 'invalid'"}}],"line":43,"description":"","durationMillis":9.233709,"failed":true,"error":"http call failed after 5 milliseconds for url: http:\/\/localhost:9695\/v1\/graphql\norg.apache.http.conn.HttpHostConnectException: Connect to localhost:9695 [localhost\/127.0.0.1, localhost\/0:0:0:0:0:0:0:1] failed: Connection refused (Connection refused)\nkarate\/features\/auth\/login.feature:53","executorName":"main","name":"Invalid Token Format","startTime":1733084827415,"refId":"[3:43]","endTime":1733084827427,"exampleIndex":-1}],"callDepth":0,"name":"Firebase Authentication Tests","description":"Test Firebase authentication and token management","resultDate":"2024-12-01 08:27:07 PM","durationMillis":161.076333,"passedCount":0}